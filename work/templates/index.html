<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI-Enhanced Study App</title>
</head>
<body>
    <h1>Welcome to the AI-Enhanced Study App</h1>
    <div>
        <h2>Learn Mode Settings</h2>
        <form method="post" action="/set_learn_mode_options">
            <label for="session-length">Session Length:</label>
            <input type="number" id="session-length" name="length" value="10">
            <label for="answer-with">Answer With:</label>
            <select id="answer-with" name="answer_with">
                <option value="definition">Definition</option>
                <option value="term">Term</option>
            </select>
            <label for="allow-typos">Allow Typos:</label>
            <input type="checkbox" id="allow-typos" name="allow_typos">
            <button type="submit">Confirm Settings</button>
        </form>
    </div>

    <div>
        <h2>Start Learn Mode</h2>
        <form method="post" action="/start_learn_mode">
            <input type="text" id="flashcard-url" name="url" placeholder="Enter flashcard URL">
            <button type="submit">Start</button>
        </form>
    </div>

    <div id="learn-mode">
        <h2>Learn Mode</h2>
        {% if feedback %}
            <p>{{ feedback }}</p>
        {% endif %}
        <p id="question-display">{{ question if question else 'Your question will appear here.' }}</p>
        <form method="post" action="/record_performance">
            <input type="text" id="user-answer" name="user_answer" placeholder="Enter your answer">
            <input type="hidden" name="question" value="{{ question }}">
            <button type="submit">Submit Answer</button>
        </form>
    </div>

    <div>
        <h2>Performance Summary</h2>
        <pre id="performance-summary">{{ performance_summary if performance_summary else 'Your performance summary will appear here.' }}</pre>
    </div>
</body>
</html>